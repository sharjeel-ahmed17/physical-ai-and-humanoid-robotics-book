from fastapi import APIRouter,Request
from src.controllers.rag_controller import process_documents, run_query

router = APIRouter()

@router.post("/embeddings")
async def create_embeddings(data: dict):
    folder_path = data["folder_path"]
    return await process_documents(folder_path)

@router.post("/query")
async def query_rag(data: dict,request:Request):
    agent_config = request.app.state.agent_config
   
    return await handle_query_operation(agent_config,data["query"])
